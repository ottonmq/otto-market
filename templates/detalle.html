{% extends "base.html" %}

{% block content %}
<div class="container py-5">
    <div class="row g-5">
        <div class="col-md-7">
            <div class="product-image-frame" style="border: 2px solid #00f2ff; padding: 10px; background: #000; border-radius: 15px; position: relative; overflow: hidden;">
                {% if anuncio.foto %}
                    <img src="{{ anuncio.foto.url }}" class="img-fluid rounded-4 main-product-img" style="width: 100%; height: auto; object-fit: cover;">
                {% else %}
                    <div class="no-image-placeholder rounded-4 d-flex align-items-center justify-content-center" style="height: 400px; background: #111; color: #444; font-family: monospace;">
                        [ NO_IMAGE_DATA_DETECTED ]
                    </div>
                {% endif %}
                <div class="scan-line"></div>
            </div>
        </div>

        <div class="col-md-5">
            <div class="product-info-card" style="background: rgba(10, 10, 10, 0.9); border: 1px solid #1a1a1a; padding: 30px; border-radius: 20px;">
                <div class="d-flex align-items-center mb-3">
                    <div class="status-dot-blink me-2" style="width: 10px; height: 10px; background: #00f2ff; border-radius: 50%; box-shadow: 0 0 10px #00f2ff;"></div>
                    <span style="color: #00f2ff; font-weight: bold; font-size: 12px; letter-spacing: 2px;">UNIDAD_DETECTADA // ID: {{ anuncio.pk }}</span>
                </div>

                <h1 class="display-6 fw-bold text-white mb-2">{{ anuncio.titulo|upper }}</h1>
                
                <div class="specs-grid mb-4" style="font-family: monospace; border-top: 1px solid #222; padding-top: 15px;   ">
                    <div class="d-flex justify-content-between py-1">
                        <span class="text-info">CATEGORÍA:</span>
                        <span class="text-warning">{{ anuncio.categoria|upper }}</span>
                    </div>
                    <div class="d-flex justify-content-between py-1">
                        <span class="text-info">MARCA :</span>
                        <span class="text-warning">{{ anuncio.marca|upper|default:"--" }} </span>
                    </div>
                    
                                <div class="d-flex justify-content-between py-1">
                        <span class="text-info">MODELO :</span>
                        <span class="text-warning">{{ anuncio.modelo|upper|default:"--" }} </span>
                    </div>        
                    
                    
                    <div class="d-flex justify-content-between py-1">
                        <span class="text-info">ESTADO_FÍSICO:</span>
                        <span class="text-warning">{{ anuncio.get_estado_fisico_display|upper|default:"N/A" }}</span>
                    </div>
                    <div class="d-flex justify-content-between py-1">
                        <span class="text-info">MODALIDAD:</span>
                        <span class="text-warning">{{ anuncio.get_tipo_negocio_display|upper|default:"N/A" }}</span>
                    </div>
                </div>
                
                <div class="price-badge-large mb-4" style="background: #00f2ff; color: #000; padding: 15px; border-radius: 10px; display: block; font-size: 16px; font-weight: 900; letter-spacing: -1px; text-align: center; box-shadow: 0 0 15px rgba(0, 242, 255, 0.3);">
                    {% if anuncio.precio %}
                        $ {{ anuncio.precio }}
                    {% else %}
                        COTIZAR_SERVICIO
                    {% endif %}
                </div>

                <div class="description-box mb-4" style="border-top: 1px solid #222; padding-top: 20px;">

                    <span class="text-info">DESCRICION:</span>
                    <p style="color: #ccc; line-height: 1.6; white-space: pre-wrap;">{{ anuncio.descripcion }}</p>
                </div>

<div class="seller-card-mini mb-5 d-flex align-items-center p-4" style="background: #111; border-radius: 15px; border: 1px solid #333; position: relative; min-height: 100px;">
    <div class="mini-avatar me-3">
        {% if anuncio.vendedor.perfil.foto_perfil %}
            <img src="{{ anuncio.vendedor.perfil.foto_perfil.url }}" style="width: 70px; height: 70px; border-radius: 50%; object-fit: cover; border: 2px solid #00f2ff; box-shadow: 0 0 10px rgba(0, 242, 255, 0.5);">
        {% else %}
            <div style="width: 70px; height: 70px; background: #00f2ff; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; color: #000; font-size: 25px;">
                {{ anuncio.vendedor.username|slice:":1"|upper }}
            </div>
        {% endif %}
    </div>
    <div style="flex: 1;">
        <div class="text-white fw-bold" style="letter-spacing: 1px; font-size: 18px;">{{ anuncio.vendedor.username|upper }}</div>
        
          <div class="text-info" style="font-family: monospace; font-size: 10px;">
            ​<i class="bi bi-person-circle"></i>
             {{ anuncio.vendedor.perfil.nombre|upper|default:"" }}
        </div>
        
        
        
        <div class="text-info" style="font-family: monospace; font-size: 10px;">
            <i class="bi bi-geo-alt"></i> {{ anuncio.vendedor.perfil.direccion|upper|default:"UBICACIÓN_DESCONOCIDA" }}
        </div>

        <div style="color: #EEEEEE !important; font-family: monospace; font-size: 10px; font-weight: bold; margin-top: 2px;">
            <i class="bi bi-envelope"></i> {{ anuncio.vendedor.email|upper|default:"SIN_EMAIL" }}
        </div>
<div style="color: #EEEEEE !important; font-family: monospace; font-size: 10px; font-weight: bold; margin-top: 2px;">
    <i class="bi bi-telephone"></i> {{ anuncio.vendedor.perfil.telefono|upper|default:"SIN_CEL" }}
</div>

        
        
    </div>
</div>


                <div class="d-grid">
                    <a href="https://wa.me/{{ anuncio.telefono|default:anuncio.vendedor.perfil.telefono|cut:' ' }}" 
                       target="_blank" 
                       class="action-button" 
                       onclick="showOttoNotification('CONTACTANDO VENDEDOR...', 'info')"
                       style="
                        display: block; 
                        width: 100%; 
                        background: #; 
                        color: green; 
                        padding: 18px 0; 
                        text-align: center; 
                        text-decoration: none; 
                        font-weight: 900; 
                        font-family: monospace;
                        border: none; 
                        border-radius: 8px; 
                        box-shadow: 0 4px 0 #008f25, 0 0 20px rgba(0, 255, 65, 0.4);
                        text-transform: uppercase;
                        letter-spacing: 2px;
                        cursor: pointer;
                        -webkit-tap-highlight-color: transparent;
                       ">
                         CONTACTAR_VENDEDOR 
              
                  </a>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    @keyframes scan { 0% { top: -100%; } 100% { top: 100%; } }
    .scan-line {
        position: absolute; width: 100%; height: 5px; background: rgba(0, 242, 255, 0.3);
        top: 0; left: 0; animation: scan 4s linear infinite; box-shadow: 0 0 15px #00f2ff;
    }
</style>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        if(typeof showOttoNotification === "function") {
            showOttoNotification('EXPEDIENTE_CARGADO_CON_ÉXITO', 'success');
        }
    });
</script>
{% endblock %}
